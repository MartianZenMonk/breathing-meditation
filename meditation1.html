<!DOCTYPE html>
<html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width-device-width,initial-scale=1.0">
<title>Breathing Meditation</title>
<style type="text/css">
.box
{
    height: 100%;
    width: 100%;
}
html,body {
	height: 100%;
	background: #000;
	color: #fff;
	overflow:hidden;
}

	</style>

	
</head>
<body>
	
	<div class="setting">
	<p>
		Breathe In (milsec.):<br/><input type="input" value="1000" id="breathe-in">
	</p>
	<p>
		Breathe Out (milsec.):<br/><input type="input" value="3000" id="breathe-out">
	</p>
	<p>
		RED :<br/><input type="range" min=0 max=255 value="255" id="redcolor">
	</p>
	<p>
		GREEN :<br/><input type="range" min=0 max=255 value="255" id="greencolor">
	</p>
	<p>
		BLUE :<br/><input type="range" min=0 max=255 value="0" id="bluecolor">
	</p>
	<p><button class="bstart">PLAY</button> </p>
	
	</div>
	<p>
		<div class="box">&nbsp;</div>
	</p>
	
</body>
<script src="jquery.min.js"></script>
<script type="text/javascript">

$(function() {

	var myVar,mcolor;
	time1=document.getElementById("breathe-in"); 
    time2=document.getElementById("breathe-out"); 
    rcolor=document.getElementById("redcolor");
    gcolor=document.getElementById("greencolor");
    bcolor=document.getElementById("bluecolor");
    mcolor= d2h(rcolor.value)+d2h(gcolor.value)+d2h(bcolor.value);

    $('.box').css("background","#"+mcolor);

	function d2h(d,padding) {
		var hex= Number(d).toString(16);
		padding = typeof (padding) === "undefined" || padding === null ? padding =2 : padding;
		while (hex.length<padding) {
			hex = "0" + hex;
		}
		return hex;
	}
	
    function myRepeat() {
    	
    	time1=document.getElementById("breathe-in"); 
    	time2=document.getElementById("breathe-out"); 
    	rcolor=document.getElementById("redcolor");
    	gcolor=document.getElementById("greencolor");
    	bcolor=document.getElementById("bluecolor");
    	mcolor= d2h(rcolor.value)+d2h(gcolor.value)+d2h(bcolor.value);

    	$('.box').css("background","#"+mcolor);
    	
        $('div.box').delay(time1.value).fadeOut(500).delay(time2.value).fadeIn(500); 
       // console.log(i++);
    }

    function clearmyRepeat() {
    	console.log(myVar);	
    	clearInterval(myVar);
    }
         
    //myVar = setInterval(myRepeat,100);
        
    $('.bstart').on('click',function() {

    	playtime= parseInt(time1.value)+parseInt(time2.value)+1000;
	
    	$('.setting').hide();
    	myVar = setInterval(myRepeat,playtime);  
    	console.log(myVar,playtime); 
    	//location.reload();	

    })

    $('.box').click(function(event) {
    	$('.setting').show();
    	clearmyRepeat();

    })
        
});

</script>
<html>